xkb_keymap {

    xkb_compat { include "complete" };

    xkb_geometry { include "pc(pc105)" };

    xkb_types {

        include "complete"  

        type "CTRL_QWERTY" {

            modifiers = None+Shift+Control;

            map[None] = Level1;
            map[Shift] = Level2;
            map[Control] = Level3;

            level_name[Level1]= "Base";
            level_name[Level2]= "Shift";
            level_name[Level3]= "Control";

            // Fix (Shift+n opens new terminal)
            preserve[Control] = Control;
        };
    };
    
    xkb_keycodes {

        include "evdev+aliases(qwerty)"


        // ////
        // Virtual keys

        <QD01> = 201;
        <QD02> = 202;
        <QD03> = 203;
        <QD04> = 204;
        <QD05> = 205;
        <QD06> = 206;
        <QD07> = 207;
        <QD08> = 208;
        <QD09> = 209;
        <QD10> = 210;

        <QC01> = 211;
        <QC02> = 212;
        <QC03> = 213;
        <QC04> = 214;
        <QC05> = 215;
        <QC06> = 216;
        <QC07> = 217;
        <QC08> = 218;
        <QC09> = 219;
        <QC10> = 220;
        <QC11> = 221;

        <QB01> = 222;
        <QB02> = 223;
        <QB03> = 224;
        <QB04> = 225;
        <QB05> = 226;
        <QB06> = 227;
        <QB07> = 228;
    };

    xkb_symbols {

        include "pc+us"        


        // ////
        // Ctrl_l is mapped to the Alt_l, Alt_l to the Ctrl_l, Return to the Alt_r

        key <RALT> { actions[Group1]=[ RedirectKey(keycode=<RTRN>) ] };
        key <LALT> { [ Control_L, Control_L ] };
        key <LCTL> { [ Alt_L ] };
        key <CAPS> { [ Mode_switch ] };

        modifier_map Control { <LALT> };
        modifier_map Mod1 { <LCTL> };

        // ////


        key <QD01> { [ q, Q ] };
        key <QD02> { [ w, W ] };
        key <QD03> { [ e, E ] };
        key <QD04> { [ r, R ] };
        key <QD05> { [ t, T ] };
        key <QD06> { [ y, Y ] };
        key <QD07> { [ u, U ] };
        key <QD08> { [ i, I ] };
        key <QD09> { [ o, O ] };
        key <QD10> { [ p, P ] };

        key <QC01> { [ a, A ] };
        key <QC02> { [ s, S ] };
        key <QC03> { [ d, D ] };
        key <QC04> { [ f, F ] };
        key <QC05> { [ g, G ] };
        key <QC06> { [ h, H ] };
        key <QC07> { [ j, J ] };
        key <QC08> { [ k, K ] };
        key <QC09> { [ l, L ] };
        key <QC10> { [ semicolon, colon ] };
        key <QC11> { [ apostrophe, quotedbl ] };

        key <QB01> { [ z, Z ] };
        key <QB02> { [ x, X ] };
        key <QB03> { [ c, C ] };
        key <QB04> { [ v, V ] };
        key <QB05> { [ b, B ] };
        key <QB06> { [ n, N ] };
        key <QB07> { [ m, M ] };


        key.type[Group1] = "CTRL_QWERTY";

        key <AD01> {
            symbols[Group1] = [ q, Q ],
            actions[Group1] = [ NoAction(), NoAction(), RedirectKey(keycode=<QD01>) ]
        };
        key <AD02> {
            symbols[Group1] = [ w, W ],
            actions[Group1] = [ NoAction(), NoAction(), RedirectKey(keycode=<QD02>) ]
        };
        key <AD03> {
            symbols[Group1] = [ f, F ],
            actions[Group1] = [ NoAction(), NoAction(), RedirectKey(keycode=<QD03>) ]
        };
        key <AD04> {
            symbols[Group1] = [ p, P ],
            actions[Group1] = [ NoAction(), NoAction(), RedirectKey(keycode=<QD04>) ]
        };
        key <AD05> {
            symbols[Group1] = [ g, G ],
            actions[Group1] = [ NoAction(), NoAction(), RedirectKey(keycode=<QD05>) ]
        };
        key <AD06> {
            symbols[Group1] = [ j, J ],
            actions[Group1] = [ NoAction(), NoAction(), RedirectKey(keycode=<QD06>) ]
        };
        key <AD07> {
            symbols[Group1] = [ l, L ],
            actions[Group1] = [ NoAction(), NoAction(), RedirectKey(keycode=<QD07>) ]
        };
        key <AD08> {
            symbols[Group1] = [ u, U ],
            actions[Group1] = [ NoAction(), NoAction(), RedirectKey(keycode=<QD08>) ]
        };
        key <AD09> {
            symbols[Group1] = [ y, Y ],
            actions[Group1] = [ NoAction(), NoAction(), RedirectKey(keycode=<QD09>) ]
        };
        key <AD10> {
            symbols[Group1] = [ semicolon, colon ],
            actions[Group1] = [ NoAction(), NoAction(), RedirectKey(keycode=<QD10>) ]
        };

        key <AC02> {
            symbols[Group1] = [ r, R ],
            actions[Group1]=[ NoAction(), NoAction(), RedirectKey(keycode=<QC02>) ]
        };
        key <AC08> {
            symbols[Group1] = [ e, E ],
            actions[Group1]=[ NoAction(), NoAction(), RedirectKey(keycode=<QC08>) ],
            actions[Group2]=[ RedirectKey(keycode=<DOWN>) ]
        };
        key <AC09> {
            symbols[Group1] = [ i, I ],
            actions[Group1]=[ NoAction(), NoAction(), RedirectKey(keycode=<QC09>) ],
            actions[Group2]=[ RedirectKey(keycode=<RGHT>) ]
        };
    };
};
